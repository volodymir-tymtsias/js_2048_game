parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function e(e){return r(e)||t(e)||l(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function r(e){if(Array.isArray(e))return u(e)}function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=l(e))){var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,u=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw o}}}}function l(e,n){if(e){if("string"==typeof e)return u(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,n):void 0}}function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var c,a,i,f=document.querySelector(".start"),s=document.querySelector(".game-score"),m=document.querySelectorAll(".field-row"),d=[],v=!1,w=!1,y=o(m);try{for(y.s();!(i=y.n()).done;){var h,g=i.value,p=o(g.cells);try{for(p.s();!(h=p.n()).done;){var b=h.value;d.push({cell:b,row:g.sectionRowIndex,column:b.cellIndex,value:0})}}catch(C){p.e(C)}finally{p.f()}}}catch(C){y.e(C)}finally{y.f()}function L(){var n,t=Math.floor(Math.random()*a.length);Math.random()>.9?(a[t].cell.textContent=4,a[t].cell.classList.add("field-cell--4"),a[t].value=4):(a[t].cell.textContent=2,a[t].cell.classList.add("field-cell--2"),a[t].value=2),(n=c).push.apply(n,e(a.splice(t,1)))}function A(e,n){var t,r,l,u;switch(e){case"Up":r=function(e,n){return e.row-n.row},l=function(e){return t.column===e.column&&t.row>e.row},u=function(e){return t.column===e.column&&t.row-1===e.row};break;case"Down":r=function(e,n){return n.row-e.row},l=function(e){return t.column===e.column&&t.row<e.row},u=function(e){return t.column===e.column&&t.row+1===e.row};break;case"Right":r=function(e,n){return n.column-e.column},l=function(e){return t.row===e.row&&t.column<e.column},u=function(e){return t.row===e.row&&t.column+1===e.column};break;case"Left":r=function(e,n){return e.column-n.column},l=function(e){return t.row===e.row&&t.column>e.column},u=function(e){return t.row===e.row&&t.column-1===e.column}}if(c.sort(r),n){var i,f=o(c);try{for(f.s();!(i=f.n()).done;){t=i.value;var s=c.filter(function(e){return t.value===e.value&&e!==t}).find(u);s&&x(t,s,"merge")}}catch(C){f.e(C)}finally{f.f()}}else{var m,d=o(c);try{for(d.s();!(m=d.n()).done;){t=m.value;var v=a.filter(l).sort(r)[0];v&&x(t,v)}}catch(C){d.e(C)}finally{d.f()}}}function S(){d.forEach(function(e){e.cell.textContent="",e.cell.className="field-cell",e.value=0}),a=[].concat(d),c=[],L(),L(),document.querySelector(".message-start").classList.toggle("hidden",!0),document.querySelector(".message-win").classList.toggle("hidden",!0),document.querySelector(".message-lose").classList.toggle("hidden",!0),s.textContent="0",document.addEventListener("keydown",k)}function k(e){if(("ArrowUp"===e.key||"ArrowDown"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key)&&("ArrowUp"===e.key&&(A("Up"),A("Up","merge"),A("Up")),"ArrowDown"===e.key&&(A("Down"),A("Down","merge"),A("Down")),"ArrowRight"===e.key&&(A("Right"),A("Right","merge"),A("Right")),"ArrowLeft"===e.key&&(A("Left"),A("Left","merge"),A("Left")),w&&(v||(v=!0,f.classList.remove("start"),f.classList.add("restart"),f.textContent="Restart"),L(),w=!1,!a.length))){var n,t=!1,r=o(c);try{var l=function(){var e=n.value,r=c.find(function(n){return n.row===e.row-1&&n.column===e.column}),o=c.find(function(n){return n.row===e.row+1&&n.column===e.column}),l=c.find(function(n){return n.column===e.column-1&&n.row===e.row}),u=c.find(function(n){return n.column===e.column-1&&n.row===e.row});r&&r.value===e.value&&(t=!0),o&&o.value===e.value&&(t=!0),l&&l.value===e.value&&(t=!0),u&&u.value===e.value&&(t=!0)};for(r.s();!(n=r.n()).done;)l()}catch(C){r.e(C)}finally{r.f()}t||(document.querySelector(".message-lose").classList.remove("hidden"),document.removeEventListener("keydown",k))}}function x(e,n,t){w=!0,n.cell.textContent=e.value+n.value,n.value=e.value+n.value,n.cell.classList.add("field-cell--"+n.value),t||c.push(n),e.cell.textContent="",e.cell.className="field-cell",e.value=0,a.push(e),a=a.filter(function(e){return 0===e.value}),c=c.filter(function(e){return e.value>0}),t&&(s.textContent=+s.textContent+n.value,2048===n.value&&(document.querySelector(".message-win").classList.remove("hidden"),document.removeEventListener("keydown",k)))}f.addEventListener("click",S);
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.e00be653.js.map